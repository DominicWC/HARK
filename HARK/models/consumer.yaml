#
# A YAML configuration file for the consumption portfolio problem blocks.
#

calibration:
    DiscFac: 0.96
    CRRA: 2.0
    R: 1.03 # can be overriden by portfolio dynamics
    Rfree: 1.03
    EqP: 0.02
    LivPrb: 0.98
    PermGroFac: 1.01
    BoroCnstArt: None
    TranShkStd: 0.1
    RiskyStd: 0.1

blocks:
    - &cons_normalized
        name: consumption normalized
        shocks:
            live: !Bernoulli
                p: LivPrb
            theta: !MeanOneLogNormal
                sigma: TranShkStd
        dynamics:
            b: k * R / PermGroFac
            m: b + theta
            c: !Control
                info: m
            a: m - c

        reward: 
            u: c ** (1 - CRRA) / (1 - CRRA)


#portfolio_block = DBlock(
#    **{
#        "name": "portfolio",
#        "shocks": {
#            "risky_return": (Lognormal, {"mean": "Rfree + EqP", "std": "RiskyStd"})
#        },
#        "dynamics": {
#            "stigma": Control(["a"]),
#            "R": lambda stigma, Rfree, risky_return: Rfree
#            + (risky_return - Rfree) * stigma,
#        },
#    }
#)

#tick_block = DBlock(
#    **{
#        "name": "tick",
#        "dynamics": {
#            "k": lambda a: a,
#        },
#    }
#)

#cons_problem = RBlock(blocks=[consumption_block, tick_block])
#cons_portfolio_problem = RBlock(blocks=[consumption_block, portfolio_block, tick_block])
